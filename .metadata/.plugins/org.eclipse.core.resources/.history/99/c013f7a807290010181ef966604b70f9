package com.user;

import java.sql.*;
import java.util.ArrayList;
import java.util.List;

public class UserDBUtil {

    public static List<User> validateUser(String userName, String password) {
        List<User> userList = new ArrayList<>();

        String url = "jdbc:mysql://localhost:3306/tendura_hotel";
        String user = "root";
        String pass = "parasite";

        String sql = "SELECT * FROM registered_user WHERE Username=? AND password=?";

        try (Connection con = DriverManager.getConnection(url, user, pass);
             PreparedStatement pst = con.prepareStatement(sql)) {

            pst.setString(1, userName);
            pst.setString(2, password);
            ResultSet rs = pst.executeQuery();

            if (rs.next()) {
                int id = rs.getInt(1);
                String name = rs.getString(2);
                String un = rs.getString(3);
                String email = rs.getString(4);
                String pw = rs.getString(5);

                User user1 = new User(id, name, un, email, pw);
                userList.add(user1);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        return userList.isEmpty() ? null : userList;
    }
}

