<!DOCTYPE html>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

<%

	Integer id = (Integer) session.getAttribute("userId");
	if(id == null){
		
		response.sendRedirect("Login.jsp");
		return;
	}
%>
<c:set var="user" value="${sessionScope.userDetails[0] }"/>
<c:set var="id" value="${sessionScope.userId}" />
<c:if test="${not empty id}">
    <p>${user.name}</p>
</c:if>

<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Tendura</title>
        <link rel="icon" href="Images/Tendura 1.png" type="image/png" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
        <link href="css/userProfile.css" rel="stylesheet">
    </head>

    <body>
        <nav class="navbar custom navbar-light bg-light fixed-top" style="opacity: 90%;">
            <div class="logo1">
              <a href="Home.jsp" class="navbar-brand">
                <span class="fw-bold text-brown fs-1 text-s5">Tendura</span>
              </a>
            </div>
            <div class="tabs">
              <ul class="nav" style="margin: 0%;">
                <li class="nav-item">
                  <a class="nav-link custom" href="Home.jsp">Home</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link custom" href="#">About Us</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link custom" href="#">Contact Us</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link custom" href="#">FAQs</a>
                </li>
              </ul>
            </div>
          </nav>
        <center>
          <hr style="width: 98%; border: 2px #422100;" class="mb-5">
        </center>

        <div class="profile-container shadow-lg"> 

          <div class="design1">

          </div>

          <form id="form1">
            
              <div class="form-container">
                <fieldset disabled id="fieldset1">
                  <legend class="fs-1">User Detals</legend><br>
                  <label class="fs-3">Name ${user.name}</label><br>
                  <input class="input1" type="text" value="${user.name}"><br><br>

                  <label class="fs-3">Username</label><br>
                  <input class="input1" type="text" value="${user.username}"><br><br>

                  <label class="fs-3">Email</label><br>
                  <input class="input1" type="email" value="${user.email}"><br><br>
                </fieldset>

                <button type="button" class="btn custom bg-brown btn-lg border-0" id="edit-btn" onclick="updateProfile();">Edit <i class="bi bi-pencil"></i></button>
                <button type="submit" class="btn-success btn-lg border-0" style="display: none;margin-bottom:50px;" id="update-btn">Update <i class="bi bi-arrow-clockwise"></i>
                </button>
                </div>
            
            </form>

              <br><br>
              <hr style="margin: auto;">
              <br><br>

          <form id="form2">
            
              <div class="form-container" style="padding-bottom:50px;">
                <fieldset disabled id="fieldset2">
                  <legend class="fs-1">Password</legend><br>
                  <label class="fs-3">Username</label><br>
                  <input class="input1" type="password" value="${user.password}"><br><br>

                  <label class="fs-3">Confirm Password</label><br>
                  <input class="input1" type="password" value="${user.password}"><br><br>
                </fieldset>
                
                <button type="button" class="btn custom bg-brown btn-lg border-0" id="cp-btn" onclick="changePass();">Change Password</button>
                <button type="submit" class="btn-success btn-lg border-0" style="margin-bottom:50px;display:none" id="cp-update-btn">Change Password</button>
                  
              </div>
          
          </form>


        </div>

        <script src="js/userProfile.js"></script>
    </body>
    
   

    
</html>